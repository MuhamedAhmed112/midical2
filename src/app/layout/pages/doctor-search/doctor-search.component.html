<div class="container mt-5 mb-5">
  <h2 class="text-center fw-bold mb-4">Find Your Doctor</h2>

  <!-- Optional: Add Search/Filter Bar here -->
  <div class="row mb-4">
    <div class="col-md-8 offset-md-2">
      <div class="input-group">
        <input type="text" class="form-control" placeholder="Search by name or specialty...">
        <button class="btn btn-primary" type="button">Search</button>
      </div>
      <!-- Add more filters like location, availability if needed -->
    </div>
  </div>

  <!-- Loading Indicator -->
  <div *ngIf="isLoading" class="text-center py-5">
    <div class="spinner-border text-primary" role="status">
      <span class="visually-hidden">Loading...</span>
    </div>
    <p class="mt-2 text-muted">Loading available doctors...</p>
  </div>

  <!-- Error Message -->
  <div *ngIf="error" class="alert alert-danger">
    <i class="fa-solid fa-circle-exclamation me-2"></i> {{ error }}
  </div>

  <!-- No Doctors Found Message -->
  <div *ngIf="!isLoading && !error && doctors.length === 0" class="alert alert-info text-center">
    <i class="fa-solid fa-info-circle me-2"></i> No doctors with available appointments found matching your criteria.
  </div>

  <!-- Doctors Grid -->
  <div *ngIf="!isLoading && !error && doctors.length > 0" class="row g-4">
    <div *ngFor="let doctor of doctors" class="col-md-6 col-lg-4">
      <div class="card h-100 doctor-card shadow-sm border-0" data-aos="fade-up">
        <img 
          [src]="doctor.profileImagePath || 'assets/images/default-doctor-avatar.png'" 
          class="card-img-top doctor-image" 
          alt="{{ doctor.doctorName || 'Doctor' }} Profile Image"
          onerror="this.src='assets/images/default-doctor-avatar.png'" 
        />
        <div class="card-body d-flex flex-column">
          <h5 class="card-title fw-semibold">{{ doctor.doctorName || 'N/A' }}</h5>
          <p class="card-text text-primary fw-medium mb-1">{{ doctor.specialization || 'N/A' }}</p>
          <p class="card-text text-muted small mb-2" *ngIf="doctor.yearsOfExperience !== undefined">{{ doctor.yearsOfExperience }} years of experience</p>
          
          <!-- Rating -->
          <div class="rating mb-2 small" *ngIf="doctor.rating !== undefined">
            <span class="text-warning">
              <i class="fas fa-star" *ngIf="doctor.rating >= 1"></i>
              <i class="fas fa-star" *ngIf="doctor.rating >= 2"></i>
              <i class="fas fa-star" *ngIf="doctor.rating >= 3"></i>
              <i class="fas fa-star" *ngIf="doctor.rating >= 4"></i>
              <i class="fas fa-star" *ngIf="doctor.rating >= 5"></i>
              <i class="fas fa-star-half-alt" *ngIf="doctor.rating > 0 && doctor.rating < 5 && doctor.rating % 1 !== 0"></i> 
            </span>
            <span class="text-muted ms-1">{{ doctor.rating.toFixed(1) }}</span>
            <span class="text-muted ms-1" *ngIf="doctor.totalReviews !== undefined">({{ doctor.totalReviews }} reviews)</span>
          </div>

          <p class="card-text small text-muted mb-3" *ngIf="doctor.bio">{{ doctor.bio | slice:0:80 }}{{ doctor.bio.length > 80 ? '...' : '' }}</p>
          
          <!-- Action Button -->
          <div class="mt-auto">
            <button class="btn btn-primary w-100" (click)="viewDoctorAppointments(doctor.id)">
              View Appointments
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

</div>

<!-- Add Custom CSS -->
<style>
  .doctor-card {
    transition: transform 0.3s ease, box-shadow 0.3s ease;
  }
  .doctor-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.15) !important;
  }
  .doctor-image {
    height: 200px;
    object-fit: cover;
  }
  .rating .fa-star, .rating .fa-star-half-alt {
    color: #ffc107; /* Bootstrap warning color */
  }
</style>

